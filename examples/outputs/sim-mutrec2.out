-- vim: ft=ttstar

### Desugared ###

  let
    constructor Bool : Type
    constructor True : Bool
    constructor False : Bool
    constructor Nat : Type
    constructor Z : Nat
    constructor S : (_x0 : Nat) -> Nat
    plus : (_x1 : Nat) -> (_x2 : Nat) -> Nat 
      n : Nat
        [plus] Z n = n
      m : Nat n : Nat
        [plus] (S m) n = S (plus m n)
    constructor Tag : Type
    constructor Even : Tag
    constructor Odd : Tag
    funTy : (_x3 : Tag) -> Type 
      [funTy] Even = (_x4 : Nat) -> Bool
      [funTy] Odd = (_x5 : Nat) -> (_x6 : Nat) -> Bool
    fun : (tag : Tag) -> funTy tag = 
      let
        even : (_x7 : Nat) -> Bool 
          [even] Z = True
          n : Nat
            [even] (S n) = fun Odd n (plus n n)
        odd : (_x8 : Nat) -> (_x9 : Nat) -> Bool 
          n : Nat
            [odd] Z n = False
          m : Nat n : Nat
            [odd] (S m) n = fun Even m
      in (\tag : Tag. 
        let f : (tag : Tag) -> funTy tag 
          [f] Even = even
          [f] Odd = odd
        in f tag)
    even : (_x10 : Nat) -> Bool = fun Even
    odd : (_x11 : Nat) -> (_x12 : Nat) -> Bool = fun Odd
    main : Bool = even 8
  in main

### Evarified ###

  let
    constructor Bool :1: Type
    constructor True :2: Bool
    constructor False :3: Bool
    constructor Nat :4: Type
    constructor Z :5: Nat
    constructor S :6: (_x0 :7: Nat) -> Nat
    plus :8: (_x1 :9: Nat) -> (_x2 :10: Nat) -> Nat 
      n :11: Nat
        [plus] -13- Z -12- n = n
      m :14: Nat n :15: Nat
        [plus] -17- (S -18- m) -16- n = S -19- (plus -21- m -20- n)
    constructor Tag :22: Type
    constructor Even :23: Tag
    constructor Odd :24: Tag
    funTy :25: (_x3 :26: Tag) -> Type 
      [funTy] -27- Even = (_x4 :28: Nat) -> Bool
      [funTy] -29- Odd = (_x5 :30: Nat) -> (_x6 :31: Nat) -> Bool
    fun :32: (tag :33: Tag) -> funTy -34- tag = 
      let
        even :35: (_x7 :36: Nat) -> Bool 
          [even] -37- Z = True
          n :38: Nat
            [even] -39- (S -40- n) = fun -43- Odd -42- n -41- (plus -45- n -44- n)
        odd :46: (_x8 :47: Nat) -> (_x9 :48: Nat) -> Bool 
          n :49: Nat
            [odd] -51- Z -50- n = False
          m :52: Nat n :53: Nat
            [odd] -55- (S -56- m) -54- n = fun -58- Even -57- m
      in (\tag :59: Tag. 
        let f :60: (tag :61: Tag) -> funTy -62- tag 
          [f] -63- Even = even
          [f] -64- Odd = odd
        in f -65- tag)
    even :66: (_x10 :67: Nat) -> Bool = fun -68- Even
    odd :69: (_x11 :70: Nat) -> (_x12 :71: Nat) -> Bool = fun -72- Odd
    main :73: Bool = even -74- 8
  in main

### Constraints ###

[7,17,41] -> [18]
[7,39] -> [40]
[7,41] -> [19]
[7,55] -> [56]
[7,74] -> [75]
[7,74,75] -> [76]
[7,74,75,76] -> [77]
[7,74,75,76,77] -> [78]
[7,74,75,76,77,78] -> [79]
[7,74,75,76,77,78,79] -> [80]
[7,74,75,76,77,78,79,80] -> [81]
[7,74,75,76,77,78,79,80,81] -> [82]
[9,19,41] -> [21]
[9,41] -> [45]
[9,41,R] -> [13,17]
[10,19,41] -> [20]
[10,41] -> [44]
[10,41,R] -> [12,16]
[11,41] -> [12]
[12,41] -> [R]
[12,41,R] -> [10]
[13,41] -> [R]
[13,41,R] -> [9]
[14,41] -> [18]
[15,41] -> [16]
[16,41] -> [R]
[16,41,R] -> [10]
[17,18,41] -> [7]
[17,41] -> [R]
[17,41,R] -> [9]
[18,41] -> [17]
[19,20,41] -> [10]
[19,20,41,R] -> [15]
[19,21,41] -> [9]
[19,21,41,R] -> [14]
[19,41] -> [7]
[19,41,R] -> [8]
[28] -> [36,57,67]
[30] -> [42,47]
[31] -> [41,48]
[33] -> [43,58,59,68]
[34] -> [62]
[36] -> [28]
[36,R] -> [37,39]
[37] -> [R]
[37,R] -> [36]
[38] -> [40]
[39] -> [R]
[39,40] -> [7]
[39,R] -> [36]
[40] -> [39]
[41] -> [31]
[41,44] -> [10]
[41,44,R] -> [38]
[41,45] -> [9]
[41,45,R] -> [38]
[41,R] -> [5,6,8,11,13,17]
[42] -> [30]
[42,R] -> [38]
[43] -> [33]
[43,R] -> [24]
[47] -> [30]
[47,R] -> [51,55]
[48] -> [31]
[48,R] -> [50,54]
[49] -> [50]
[50] -> [R]
[50,R] -> [48]
[51] -> [R]
[51,R] -> [47]
[52] -> [56]
[53] -> [54]
[54] -> [R]
[54,R] -> [48]
[55] -> [R]
[55,56] -> [7]
[55,R] -> [47]
[56] -> [55]
[57] -> [28]
[57,R] -> [52]
[58] -> [33]
[58,R] -> [23]
[59] -> [33]
[61] -> [65]
[61,R] -> [63,64]
[62] -> [34]
[63] -> [R]
[63,R] -> [61]
[64] -> [R]
[64,R] -> [61]
[65] -> [61]
[65,R] -> [59]
[67] -> [28,74]
[68] -> [33]
[68,R] -> [23]
[74] -> [67]
[74,75] -> [7]
[74,75,76] -> [7]
[74,75,76,77] -> [7]
[74,75,76,77,78] -> [7]
[74,75,76,77,78,79] -> [7]
[74,75,76,77,78,79,80] -> [7]
[74,75,76,77,78,79,80,81] -> [7]
[74,75,76,77,78,79,80,81,82] -> [7]
[74,75,76,77,78,79,80,81,82,R] -> [5]
[74,75,76,77,78,79,80,81,R] -> [6]
[74,75,76,77,78,79,80,R] -> [6]
[74,75,76,77,78,79,R] -> [6]
[74,75,76,77,78,R] -> [6]
[74,75,76,77,R] -> [6]
[74,75,76,R] -> [6]
[74,75,R] -> [6]
[74,R] -> [6]
[R] -> [2,3,5,6,23,24,32,35,37,39,46,51,55,60,63,64,66,73]

### Solution ###

[2,3,5,6,7,23,24,28,30,32,33,35,36,37,38,39,40,42,43,46,47,51,52,55,56,57,58,59,60,61,63,64,65,66,67,68,73,74,75,76,77,78,79,80,81,82,R]

### Annotated ###

  let
    constructor Bool :E: Type
    constructor True :R: Bool
    constructor False :R: Bool
    constructor Nat :E: Type
    constructor Z :R: Nat
    constructor S :R: (_x0 :R: Nat) -> Nat
    plus :E: (_x1 :E: Nat) -> (_x2 :E: Nat) -> Nat 
      n :E: Nat
        [plus] -E- Z -E- n = n
      m :E: Nat n :E: Nat
        [plus] -E- (S -E- m) -E- n = S -E- (plus -E- m -E- n)
    constructor Tag :E: Type
    constructor Even :R: Tag
    constructor Odd :R: Tag
    funTy :E: (_x3 :E: Tag) -> Type 
      [funTy] -E- Even = (_x4 :R: Nat) -> Bool
      [funTy] -E- Odd = (_x5 :R: Nat) -> (_x6 :E: Nat) -> Bool
    fun :R: (tag :R: Tag) -> funTy -E- tag = 
      let
        even :R: (_x7 :R: Nat) -> Bool 
          [even] -R- Z = True
          n :R: Nat
            [even] -R- (S -R- n) = fun -R- Odd -R- n -E- (plus -E- n -E- n)
        odd :R: (_x8 :R: Nat) -> (_x9 :E: Nat) -> Bool 
          n :E: Nat
            [odd] -R- Z -E- n = False
          m :R: Nat n :E: Nat
            [odd] -R- (S -R- m) -E- n = fun -R- Even -R- m
      in (\tag :R: Tag. 
        let f :R: (tag :R: Tag) -> funTy -E- tag 
          [f] -R- Even = even
          [f] -R- Odd = odd
        in f -R- tag)
    even :R: (_x10 :R: Nat) -> Bool = fun -R- Even
    odd :E: (_x11 :E: Nat) -> (_x12 :E: Nat) -> Bool = fun -E- Odd
    main :R: Bool = even -R- 8
  in main

### Specialised ###

  let
    constructor Bool :E: Type
    constructor True :R: Bool
    constructor False :R: Bool
    constructor Nat :E: Type
    constructor Z :R: Nat
    constructor S :R: (_x0 :R: Nat) -> Nat
    plus :E: (_x1 :E: Nat) -> (_x2 :E: Nat) -> Nat 
      n :E: Nat
        [plus] -E- Z -E- n = n
      m :E: Nat n :E: Nat
        [plus] -E- (S -E- m) -E- n = S -E- (plus -E- m -E- n)
    constructor Tag :E: Type
    constructor Even :R: Tag
    constructor Odd :R: Tag
    funTy :E: (_x3 :E: Tag) -> Type 
      [funTy] -E- Even = (_x4 :R: Nat) -> Bool
      [funTy] -E- Odd = (_x5 :R: Nat) -> (_x6 :E: Nat) -> Bool
    fun :R: (tag :R: Tag) -> funTy -E- tag = 
      let
        even :R: (_x7 :R: Nat) -> Bool 
          [even] -R- Z = True
          n :R: Nat
            [even] -R- (S -R- n) = fun -R- Odd -R- n -E- (plus -E- n -E- n)
        odd :R: (_x8 :R: Nat) -> (_x9 :E: Nat) -> Bool 
          n :E: Nat
            [odd] -R- Z -E- n = False
          m :R: Nat n :E: Nat
            [odd] -R- (S -R- m) -E- n = fun -R- Even -R- m
      in (\tag :R: Tag. 
        let f :R: (tag :R: Tag) -> funTy -E- tag 
          [f] -R- Even = even
          [f] -R- Odd = odd
        in f -R- tag)
    even :R: (_x10 :R: Nat) -> Bool = fun -R- Even
    odd :E: (_x11 :E: Nat) -> (_x12 :E: Nat) -> Bool = fun -E- Odd
    main :R: Bool = even -R- 8
  in main

### Final annotation ###

  let
    constructor Bool :E: Type
    constructor True :R: Bool
    constructor False :R: Bool
    constructor Nat :E: Type
    constructor Z :R: Nat
    constructor S :R: (_x0 :R: Nat) -> Nat
    plus :E: (_x1 :E: Nat) -> (_x2 :E: Nat) -> Nat 
      n :E: Nat
        [plus] -E- Z -E- n = n
      m :E: Nat n :E: Nat
        [plus] -E- (S -E- m) -E- n = S -E- (plus -E- m -E- n)
    constructor Tag :E: Type
    constructor Even :R: Tag
    constructor Odd :R: Tag
    funTy :E: (_x3 :E: Tag) -> Type 
      [funTy] -E- Even = (_x4 :R: Nat) -> Bool
      [funTy] -E- Odd = (_x5 :R: Nat) -> (_x6 :E: Nat) -> Bool
    fun :R: (tag :R: Tag) -> funTy -E- tag = 
      let
        even :R: (_x7 :R: Nat) -> Bool 
          [even] -R- Z = True
          n :R: Nat
            [even] -R- (S -R- n) = fun -R- Odd -R- n -E- (plus -E- n -E- n)
        odd :R: (_x8 :R: Nat) -> (_x9 :E: Nat) -> Bool 
          n :E: Nat
            [odd] -R- Z -E- n = False
          m :R: Nat n :E: Nat
            [odd] -R- (S -R- m) -E- n = fun -R- Even -R- m
      in (\tag :R: Tag. 
        let f :R: (tag :R: Tag) -> funTy -E- tag 
          [f] -R- Even = even
          [f] -R- Odd = odd
        in f -R- tag)
    even :R: (_x10 :R: Nat) -> Bool = fun -R- Even
    odd :E: (_x11 :E: Nat) -> (_x12 :E: Nat) -> Bool = fun -E- Odd
    main :R: Bool = even -R- 8
  in main

### Verification ###

Verification successful.

### Pruned ###

  let
    constructor True : Bool
    constructor False : Bool
    constructor Z : Nat
    constructor S : (_x0) -> Nat
    constructor Even : Tag
    constructor Odd : Tag
    fun = 
      let
        even 
          [_] Z = True
          [_] (S n) = fun Odd n
        odd 
          [_] Z = False
          [_] (S m) = fun Even m
      in (\tag. 
        let f 
          [_] Even = even
          [_] Odd = odd
        in f tag)
    even = fun Even
    main = even 8
  in main

### Normal forms ###

unerased:
  
  let
    constructor Bool : Type
    constructor True : Bool
  in True

erased:
  
  let constructor True : Bool
  in True

