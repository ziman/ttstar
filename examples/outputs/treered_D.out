-- vim: ft=ttstar

### Desugared ###

  let
    constructor Bool : Type
    constructor True : Bool
    constructor False : Bool
    constructor Foo : (_x0 : Bool) -> Type
    constructor Yeah : Foo True
    constructor Nope : Foo False
    constructor Maybe : (_x1 : Type) -> Type
    constructor Nothing : (a : Type) -> Maybe a
    constructor Just : (a : Type) -> (x : a) -> Maybe a
    f : (x : Maybe Bool) -> Bool 
      (b : Bool)
         (Just [Bool] b) = b
       (Nothing [Bool]) = False
    g : (x : Maybe Bool) -> Foo (f x) 
       (Just [Bool] True) = Yeah
       (Just [Bool] False) = Nope
       (Nothing [Bool]) = Nope
    main : Foo True = g (Just Bool True)
  in main

### Evarified ###

  let
    constructor Bool :1: Type
    constructor True :2: Bool
    constructor False :3: Bool
    constructor Foo :4: (_x0 :5: Bool) -> Type
    constructor Yeah :6: Foo -7- True
    constructor Nope :8: Foo -9- False
    constructor Maybe :10: (_x1 :11: Type) -> Type
    constructor Nothing :12: (a :13: Type) -> Maybe -14- a
    constructor Just :15: (a :16: Type) -> (x :17: a) -> Maybe -18- a
    f :19: (x :20: Maybe -21- Bool) -> Bool 
      (b :22: Bool)
         -23- (Just -24- [Bool] -25- b) = b
       -26- (Nothing -27- [Bool]) = False
    g :28: (x :29: Maybe -30- Bool) -> Foo -31- (f -32- x) 
       -33- (Just -34- [Bool] -35- True) = Yeah
       -36- (Just -37- [Bool] -38- False) = Nope
       -39- (Nothing -40- [Bool]) = Nope
    main :41: Foo -42- True = g -43- (Just -45- Bool -44- True)
  in main

### Constraints ###

[] -> [2,3,6,8,12,15,17,28,29,33,35,36,38,39,43,44,R]
[7] -> [31]
[9] -> [31]
[13] -> [40]
[14] -> [30]
[16] -> [1,34,37,45]
[18] -> [30]
[30] -> [14,18]
[31] -> [7,9,42]
[34] -> [1,16]
[37] -> [1,16]
[40] -> [1,13]
[42] -> [31]
[45] -> [16]
[R] -> [41]

### Solution ###

[2,3,6,8,12,15,17,28,29,33,35,36,38,39,41,43,44,R]

### Annotated ###

  let
    constructor Bool :E: Type
    constructor True :R: Bool
    constructor False :R: Bool
    constructor Foo :E: (_x0 :E: Bool) -> Type
    constructor Yeah :R: Foo -E- True
    constructor Nope :R: Foo -E- False
    constructor Maybe :E: (_x1 :E: Type) -> Type
    constructor Nothing :R: (a :E: Type) -> Maybe -E- a
    constructor Just :R: (a :E: Type) -> (x :R: a) -> Maybe -E- a
    f :E: (x :E: Maybe -E- Bool) -> Bool 
      (b :E: Bool)
         -E- (Just -E- [Bool] -E- b) = b
       -E- (Nothing -E- [Bool]) = False
    g :R: (x :R: Maybe -E- Bool) -> Foo -E- (f -E- x) 
       -R- (Just -E- [Bool] -R- True) = Yeah
       -R- (Just -E- [Bool] -R- False) = Nope
       -R- (Nothing -E- [Bool]) = Nope
    main :R: Foo -E- True = g -R- (Just -E- Bool -R- True)
  in main

### Specialised ###

  let
    constructor Bool :E: Type
    constructor True :R: Bool
    constructor False :R: Bool
    constructor Foo :E: (_x0 :E: Bool) -> Type
    constructor Yeah :R: Foo -E- True
    constructor Nope :R: Foo -E- False
    constructor Maybe :E: (_x1 :E: Type) -> Type
    constructor Nothing :R: (a :E: Type) -> Maybe -E- a
    constructor Just :R: (a :E: Type) -> (x :R: a) -> Maybe -E- a
    f :E: (x :E: Maybe -E- Bool) -> Bool 
      (b :E: Bool)
         -E- (Just -E- [Bool] -E- b) = b
       -E- (Nothing -E- [Bool]) = False
    g :R: (x :R: Maybe -E- Bool) -> Foo -E- (f -E- x) 
       -R- (Just -E- [Bool] -R- True) = Yeah
       -R- (Just -E- [Bool] -R- False) = Nope
       -R- (Nothing -E- [Bool]) = Nope
    main :R: Foo -E- True = g -R- (Just -E- Bool -R- True)
  in main

### Final annotation ###

  let
    constructor Bool :E: Type
    constructor True :R: Bool
    constructor False :R: Bool
    constructor Foo :E: (_x0 :E: Bool) -> Type
    constructor Yeah :R: Foo -E- True
    constructor Nope :R: Foo -E- False
    constructor Maybe :E: (_x1 :E: Type) -> Type
    constructor Nothing :R: (a :E: Type) -> Maybe -E- a
    constructor Just :R: (a :E: Type) -> (x :R: a) -> Maybe -E- a
    f :E: (x :E: Maybe -E- Bool) -> Bool 
      (b :E: Bool)
         -E- (Just -E- [Bool] -E- b) = b
       -E- (Nothing -E- [Bool]) = False
    g :R: (x :R: Maybe -E- Bool) -> Foo -E- (f -E- x) 
       -R- (Just -E- [Bool] -R- True) = Yeah
       -R- (Just -E- [Bool] -R- False) = Nope
       -R- (Nothing -E- [Bool]) = Nope
    main :R: Foo -E- True = g -R- (Just -E- Bool -R- True)
  in main

### Verification ###

Verification successful.

### Pruned ###

  let
    constructor True : Bool
    constructor False : Bool
    constructor Yeah : Foo
    constructor Nope : Foo
    constructor Nothing : Maybe
    constructor Just : (x) -> Maybe
    g 
       (Just True) = Yeah
       (Just False) = Nope
       Nothing = Nope
    main = g (Just True)
  in main

### Normal forms ###

unerased:
  
  let
    constructor Bool : Type
    constructor True : Bool
    constructor Foo : (_x0 : Bool) -> Type
    constructor Yeah : Foo True
  in Yeah

erased:
  
  let constructor Yeah : Foo
  in Yeah

