-- vim: ft=idris

### Desugared ###

  let
    postulate Bool : Type
    postulate T : Bool
    postulate F : Bool
    broken : (_x0 : Bool) -> Bool 
      n : Bool
        [broken] n = 
          let id : (_x1 : Bool) -> Bool 
            [id] n = n
          in id n
    main : Bool = broken T
  in main

### Evarified ###

  let
    postulate Bool :1: Type
    postulate T :2: Bool
    postulate F :3: Bool
    broken :4: (_x0 :5: Bool) -> Bool 
      n :6: Bool
        [broken] -7- n = 
          let id :8: (_x1 :9: Bool) -> Bool 
            [id] -10- n = n
          in id -11- n
    main :12: Bool = broken -13- T
  in main

### Constraints ###

ttstar: Traceback:
1. In context:
  Type : Type

("LET",
  let
    postulate Bool :1: Type
    postulate T :2: Bool
    postulate F :3: Bool
    broken :4: (_x0 :5: Bool) -> Bool 
      n :6: Bool
        [broken] -7- n = 
          let id :8: (_x1 :9: Bool) -> Bool 
            [id] -10- n = n
          in id -11- n
    main :12: Bool = broken -13- T
  in main)

2. In context:
  Bool : Type
  F : Bool
  T : Bool
  Type : Type
  broken : (_x0 :5: Bool) -> Bool

("DEF-CLAUSES",broken)

3. In context:
  Bool : Type
  F : Bool
  T : Bool
  Type : Type
  broken : (_x0 :5: Bool) -> Bool

("CLAUSE",PApp 7 (PForced broken) (PV n))

4. In context:
  Bool : Type
  F : Bool
  T : Bool
  Type : Type
  broken : (_x0 :5: Bool) -> Bool
  n : Bool

("LET",
  let id :8: (_x1 :9: Bool) -> Bool 
    [id] -10- n = n
  in id -11- n)

5. In context:
  Bool : Type
  F : Bool
  T : Bool
  Type : Type
  broken : (_x0 :5: Bool) -> Bool
  id : (_x1 :9: Bool) -> Bool
  n : Bool

("DEF-CLAUSES",id)

6. In context:
  Bool : Type
  F : Bool
  T : Bool
  Type : Type
  broken : (_x0 :5: Bool) -> Bool
  id : (_x1 :9: Bool) -> Bool
  n : Bool

("CLAUSE",PApp 10 (PForced id) (PV n))

Error: PatvarsPatternMismatch [] [n]

CallStack (from HasCallStack):
  error, called at Main.hs:68:38 in main:Main
