-- vim: ft=agda

### Desugared ###

postulate N : *

postulate Z : N

postulate S : (_ : N) -> N

postulate Vec : (_ : N) -> (_ : *) -> *

postulate Nil : (a : *) -> Vec Z a

postulate Cons : (a : *) -> (n : N) -> (x  -R-  a) -> (xs  -R-  Vec n a) -> Vec (S n) a

plus : (_ : N) -> (_ : N) -> N
  pat (n : N).
    plus Z n  =  n
  pat (m : N) (n : N).
    plus (S m) n  =  S (plus m n)

append : (a : *) -> (m : N) -> (n : N) -> (xs : Vec m a) -> (ys : Vec n a) -> Vec (plus m n) a
  pat (a : *) (n : N) (ys : Vec n a).
    append a Z n (Nil a) ys  =  ys
  pat (a : *) (m : N) (n : N) (x : a) (xs : Vec m a) (ys : Vec n a).
    append a (S m) n (Cons a m x xs) ys  =  Cons a (plus m n) x (append a m n xs ys)

main  -R-  Vec 1 N
  = append N Z 1 (Nil N) (Cons N Z 42 (Nil N))

### Metaified ###

postulate N :?1: *

postulate Z :?2: N

postulate S :?3: (_ :?4: N) -> N

postulate Vec :?5: (_ :?6: N) -> (_ :?7: *) -> *

postulate Nil :?8: (a :?9: *) -> Vec -?11- Z -?10- a

postulate Cons :?12: (a :?13: *) -> (n :?14: N) -> (x :!R: a) -> (xs :!R: Vec -?16- n -?15- a) -> Vec -?18- (S -?19- n) -?17- a

plus :?20: (_ :?21: N) -> (_ :?22: N) -> N
  pat (n :?23: N).
    plus -?25- Z -?24- n  =  n
  pat (m :?26: N) (n :?27: N).
    plus -?29- (S -?30- m) -?28- n  =  S -?31- (plus -?33- m -?32- n)

append :?34: (a :?35: *) -> (m :?36: N) -> (n :?37: N) -> (xs :?38: Vec -?40- m -?39- a) -> (ys :?41: Vec -?43- n -?42- a) -> Vec -?45- (plus -?47- m -?46- n) -?44- a
  pat (a :?48: *) (n :?49: N) (ys :?50: Vec -?52- n -?51- a).
    append -?57- a -?56- Z -?55- n -?54- (Nil -?58- a) -?53- ys  =  ys
  pat (a :?59: *) (m :?60: N) (n :?61: N) (x :?62: a) (xs :?63: Vec -?65- m -?64- a) (ys :?66: Vec -?68- n -?67- a).
    append -?73- a -?72- (S -?74- m) -?71- n -?70- (Cons -?78- a -?77- m -?76- x -?75- xs) -?69- ys  =  Cons -?82- a -?81- (plus -?84- m -?83- n) -?80- x -?79- (append -?89- a -?88- m -?87- n -?86- xs -?85- ys)

main :!R: Vec -?91- 1 -?90- N
  = append -?97- N -?96- Z -?95- 1 -?94- (Nil -?99- N) -?93- (Cons -?103- N -?102- Z -?101- 42 -?100- (Nil -?146- N))

### Inferred definitions ###

Cons :?12: (a :?13: *) -> (n :?14: N) -> (x :!R: a) -> (xs :!R: Vec -?16- n -?15- a) -> Vec -?18- (S -?19- n) -?17- a

N :?1: *

Nil :?8: (a :?9: *) -> Vec -?11- Z -?10- a

S :?3: (_ :?4: N) -> N

Vec :?5: (_ :?6: N) -> (_ :?7: *) -> *

Z :?2: N

append :?34: (a :?35: *) -> (m :?36: N) -> (n :?37: N) -> (xs :?38: Vec -?40- m -?39- a) -> (ys :?41: Vec -?43- n -?42- a) -> Vec -?45- (plus -?47- m -?46- n) -?44- a 
  pat (a :?48: *) (n :?49: N) (ys :?50: Vec -?52- n -?51- a).
    append -?57- a -?56- Z -?55- n -?54- (Nil -?58- a) -?53- ys  =  ys
  pat (a :?59: *) (m :?60: N) (n :?61: N) (x :?62: a) (xs :?63: Vec -?65- m -?64- a) (ys :?66: Vec -?68- n -?67- a).
    append -?73- a -?72- (S -?74- m) -?71- n -?70- (Cons -?78- a -?77- m -?76- x -?75- xs) -?69- ys  =  Cons -?82- a -?81- (plus -?84- m -?83- n) -?80- x -?79- (append -?89- a -?88- m -?87- n -?86- xs -?85- ys)
  [] -> [?12,?34,?38,?41,?50,?53,?54,?62,?63,?66,?69,?70,?75,?76,?79,?80,?85,?86,!R]
  [?2] -> [?36]
  [?3] -> [?36]
  [?4] -> [?36,?74]
  [?9] -> [?58]
  [?10] -> [?39]
  [?11] -> [?40]
  [?13] -> [?59,?78,?82]
  [?14] -> [?20,?77,?81]
  [?14,?21] -> [?60,?84]
  [?14,?22] -> [?61,?83]
  [?14,?83] -> [?22]
  [?14,?84] -> [?21]
  [?15] -> [?44,?64]
  [?16] -> [?45,?65]
  [?17] -> [?39,?44]
  [?18] -> [?40,?45]
  [?19] -> [?31,?74]
  [?31] -> [?19]
  [?32] -> [?83]
  [?33] -> [?84]
  [?35] -> [?57,?59,?73,?89]
  [?36] -> [?56,?60,?72,?88]
  [?37] -> [?55,?61,?71,?87]
  [?39] -> [?10,?17,?64]
  [?40] -> [?11,?18,?65]
  [?42] -> [?51,?67]
  [?43] -> [?52,?68]
  [?44] -> [?15,?17,?51]
  [?45] -> [?16,?18,?52]
  [?46] -> [?83]
  [?47] -> [?84]
  [?48] -> [?9,?35]
  [?49] -> [?37]
  [?51] -> [?42,?44]
  [?52] -> [?43,?45]
  [?55] -> [?37]
  [?56] -> [?36]
  [?57] -> [?35]
  [?58] -> [?9]
  [?59] -> [?13,?35]
  [?60] -> [?4,?14,?36]
  [?61] -> [?37]
  [?64] -> [?15,?39]
  [?65] -> [?16,?40]
  [?67] -> [?42]
  [?68] -> [?43]
  [?71] -> [?37]
  [?72] -> [?36]
  [?73] -> [?35]
  [?74] -> [?4,?19,?36]
  [?77] -> [?14]
  [?78] -> [?13]
  [?81] -> [?14]
  [?82] -> [?13]
  [?83] -> [?32,?46]
  [?84] -> [?33,?47]
  [?87] -> [?37]
  [?88] -> [?36]
  [?89] -> [?35]

main :!R: Vec -?91- 1 -?90- N = append -?97- N -?96- Z -?95- 1 -?94- (Nil -?99- N) -?93- (Cons -?103- N -?102- Z -?101- 42 -?100- (Nil -?146- N))
  [] -> [?34,!R]
  [?4,?37] -> [?2,?98]
  [?4,?41] -> [?2,?3,?104,?105,?106,?107,?108,?109,?110,?111,?112,?113,?114,?115,?116,?117,?118,?119,?120,?121,?122,?123,?124,?125,?126,?127,?128,?129,?130,?131,?132,?133,?134,?135,?136,?137,?138,?139,?140,?141,?142,?143,?144,?145]
  [?4,?41,?105] -> [?4]
  [?4,?41,?106] -> [?4]
  [?4,?41,?107] -> [?4]
  [?4,?41,?108] -> [?4]
  [?4,?41,?109] -> [?4]
  [?4,?41,?110] -> [?4]
  [?4,?41,?111] -> [?4]
  [?4,?41,?112] -> [?4]
  [?4,?41,?113] -> [?4]
  [?4,?41,?114] -> [?4]
  [?4,?41,?115] -> [?4]
  [?4,?41,?116] -> [?4]
  [?4,?41,?117] -> [?4]
  [?4,?41,?118] -> [?4]
  [?4,?41,?119] -> [?4]
  [?4,?41,?120] -> [?4]
  [?4,?41,?121] -> [?4]
  [?4,?41,?122] -> [?4]
  [?4,?41,?123] -> [?4]
  [?4,?41,?124] -> [?4]
  [?4,?41,?125] -> [?4]
  [?4,?41,?126] -> [?4]
  [?4,?41,?127] -> [?4]
  [?4,?41,?128] -> [?4]
  [?4,?41,?129] -> [?4]
  [?4,?41,?130] -> [?4]
  [?4,?41,?131] -> [?4]
  [?4,?41,?132] -> [?4]
  [?4,?41,?133] -> [?4]
  [?4,?41,?134] -> [?4]
  [?4,?41,?135] -> [?4]
  [?4,?41,?136] -> [?4]
  [?4,?41,?137] -> [?4]
  [?4,?41,?138] -> [?4]
  [?4,?41,?139] -> [?4]
  [?4,?41,?140] -> [?4]
  [?4,?41,?141] -> [?4]
  [?4,?41,?142] -> [?4]
  [?4,?41,?143] -> [?4]
  [?4,?41,?144] -> [?4]
  [?4,?41,?145] -> [?4]
  [?9,?38] -> [?1,?99]
  [?9,?41] -> [?1,?146]
  [?10] -> [?39]
  [?10,?41] -> [?15]
  [?11] -> [?40]
  [?11,?41] -> [?16]
  [?13,?41] -> [?1,?103]
  [?14,?41] -> [?2,?102]
  [?15,?41] -> [?10]
  [?16,?41] -> [?11]
  [?17] -> [?42]
  [?18] -> [?43]
  [?19] -> [?98]
  [?35] -> [?1,?97]
  [?36] -> [?2,?96]
  [?37] -> [?3,?95]
  [?37,?98] -> [?4]
  [?38] -> [?8,?94]
  [?38,?99] -> [?9]
  [?39] -> [?10]
  [?40] -> [?11]
  [?41] -> [?3,?8,?12,?93,?100,?101]
  [?41,?102] -> [?14]
  [?41,?103] -> [?13]
  [?41,?104] -> [?4]
  [?41,?146] -> [?9]
  [?42] -> [?17]
  [?43] -> [?18]
  [?44] -> [?90]
  [?45] -> [?91]
  [?90] -> [?44]
  [?91] -> [?45]
  [?92] -> [?98]
  [?93] -> [?41]
  [?94] -> [?38]
  [?95] -> [?37]
  [?96] -> [?36]
  [?97] -> [?35]
  [?98] -> [?19,?92]

plus :?20: (_ :?21: N) -> (_ :?22: N) -> N 
  pat (n :?23: N).
    plus -?25- Z -?24- n  =  n
  pat (m :?26: N) (n :?27: N).
    plus -?29- (S -?30- m) -?28- n  =  S -?31- (plus -?33- m -?32- n)
  [] -> [?3,?21,?22,?23,?24,?25,?28,?29,!R]
  [?4] -> [?20,?26,?27,?30,?31,?32,?33]
  [?26] -> [?4]
  [?30] -> [?4]
  [?31] -> [?4]


### Constraints ###

[] -> [?3,?12,?21,?22,?23,?24,?25,?28,?29,?34,?38,?41,?50,?53,?54,?62,?63,?66,?69,?70,?75,?76,?79,?80,?85,?86,!R]
[?2] -> [?36]
[?3] -> [?36]
[?4] -> [?20,?26,?27,?30,?31,?32,?33,?36,?74]
[?4,?37] -> [?2,?98]
[?4,?41] -> [?2,?3,?104,?105,?106,?107,?108,?109,?110,?111,?112,?113,?114,?115,?116,?117,?118,?119,?120,?121,?122,?123,?124,?125,?126,?127,?128,?129,?130,?131,?132,?133,?134,?135,?136,?137,?138,?139,?140,?141,?142,?143,?144,?145]
[?4,?41,?105] -> [?4]
[?4,?41,?106] -> [?4]
[?4,?41,?107] -> [?4]
[?4,?41,?108] -> [?4]
[?4,?41,?109] -> [?4]
[?4,?41,?110] -> [?4]
[?4,?41,?111] -> [?4]
[?4,?41,?112] -> [?4]
[?4,?41,?113] -> [?4]
[?4,?41,?114] -> [?4]
[?4,?41,?115] -> [?4]
[?4,?41,?116] -> [?4]
[?4,?41,?117] -> [?4]
[?4,?41,?118] -> [?4]
[?4,?41,?119] -> [?4]
[?4,?41,?120] -> [?4]
[?4,?41,?121] -> [?4]
[?4,?41,?122] -> [?4]
[?4,?41,?123] -> [?4]
[?4,?41,?124] -> [?4]
[?4,?41,?125] -> [?4]
[?4,?41,?126] -> [?4]
[?4,?41,?127] -> [?4]
[?4,?41,?128] -> [?4]
[?4,?41,?129] -> [?4]
[?4,?41,?130] -> [?4]
[?4,?41,?131] -> [?4]
[?4,?41,?132] -> [?4]
[?4,?41,?133] -> [?4]
[?4,?41,?134] -> [?4]
[?4,?41,?135] -> [?4]
[?4,?41,?136] -> [?4]
[?4,?41,?137] -> [?4]
[?4,?41,?138] -> [?4]
[?4,?41,?139] -> [?4]
[?4,?41,?140] -> [?4]
[?4,?41,?141] -> [?4]
[?4,?41,?142] -> [?4]
[?4,?41,?143] -> [?4]
[?4,?41,?144] -> [?4]
[?4,?41,?145] -> [?4]
[?9] -> [?58]
[?9,?38] -> [?1,?99]
[?9,?41] -> [?1,?146]
[?10] -> [?39]
[?10,?41] -> [?15]
[?11] -> [?40]
[?11,?41] -> [?16]
[?13] -> [?59,?78,?82]
[?13,?41] -> [?1,?103]
[?14] -> [?20,?77,?81]
[?14,?21] -> [?60,?84]
[?14,?22] -> [?61,?83]
[?14,?41] -> [?2,?102]
[?14,?83] -> [?22]
[?14,?84] -> [?21]
[?15] -> [?44,?64]
[?15,?41] -> [?10]
[?16] -> [?45,?65]
[?16,?41] -> [?11]
[?17] -> [?39,?42,?44]
[?18] -> [?40,?43,?45]
[?19] -> [?31,?74,?98]
[?26] -> [?4]
[?30] -> [?4]
[?31] -> [?4,?19]
[?32] -> [?83]
[?33] -> [?84]
[?35] -> [?1,?57,?59,?73,?89,?97]
[?36] -> [?2,?56,?60,?72,?88,?96]
[?37] -> [?3,?55,?61,?71,?87,?95]
[?37,?98] -> [?4]
[?38] -> [?8,?94]
[?38,?99] -> [?9]
[?39] -> [?10,?17,?64]
[?40] -> [?11,?18,?65]
[?41] -> [?3,?8,?12,?93,?100,?101]
[?41,?102] -> [?14]
[?41,?103] -> [?13]
[?41,?104] -> [?4]
[?41,?146] -> [?9]
[?42] -> [?17,?51,?67]
[?43] -> [?18,?52,?68]
[?44] -> [?15,?17,?51,?90]
[?45] -> [?16,?18,?52,?91]
[?46] -> [?83]
[?47] -> [?84]
[?48] -> [?9,?35]
[?49] -> [?37]
[?51] -> [?42,?44]
[?52] -> [?43,?45]
[?55] -> [?37]
[?56] -> [?36]
[?57] -> [?35]
[?58] -> [?9]
[?59] -> [?13,?35]
[?60] -> [?4,?14,?36]
[?61] -> [?37]
[?64] -> [?15,?39]
[?65] -> [?16,?40]
[?67] -> [?42]
[?68] -> [?43]
[?71] -> [?37]
[?72] -> [?36]
[?73] -> [?35]
[?74] -> [?4,?19,?36]
[?77] -> [?14]
[?78] -> [?13]
[?81] -> [?14]
[?82] -> [?13]
[?83] -> [?32,?46]
[?84] -> [?33,?47]
[?87] -> [?37]
[?88] -> [?36]
[?89] -> [?35]
[?90] -> [?44]
[?91] -> [?45]
[?92] -> [?98]
[?93] -> [?41]
[?94] -> [?38]
[?95] -> [?37]
[?96] -> [?36]
[?97] -> [?35]
[?98] -> [?19,?92]

### Solution ###

[?2,?3,?4,?8,?12,?14,?19,?20,?21,?22,?23,?24,?25,?26,?27,?28,?29,?30,?31,?32,?33,?34,?36,?37,?38,?41,?46,?47,?50,?53,?54,?55,?56,?60,?61,?62,?63,?66,?69,?70,?71,?72,?74,?75,?76,?77,?79,?80,?81,?83,?84,?85,?86,?87,?88,?92,?93,?94,?95,?96,?98,?100,?101,?102,?104,?105,?106,?107,?108,?109,?110,?111,?112,?113,?114,?115,?116,?117,?118,?119,?120,?121,?122,?123,?124,?125,?126,?127,?128,?129,?130,?131,?132,?133,?134,?135,?136,?137,?138,?139,?140,?141,?142,?143,?144,?145,!R]

### Annotated ###

postulate N :E: *

postulate Z :R: N

postulate S :R: (_ :R: N) -> N

postulate Vec :E: (_ :E: N) -> (_ :E: *) -> *

postulate Nil :R: (a :E: *) -> Vec -E- Z -E- a

postulate Cons :R: (a :E: *) -> (n :R: N) -> (x :R: a) -> (xs :R: Vec -E- n -E- a) -> Vec -E- (S -R- n) -E- a

plus :R: (_ :R: N) -> (_ :R: N) -> N
  pat (n :R: N).
    plus -R- Z -R- n  =  n
  pat (m :R: N) (n :R: N).
    plus -R- (S -R- m) -R- n  =  S -R- (plus -R- m -R- n)

append :R: (a :E: *) -> (m :R: N) -> (n :R: N) -> (xs :R: Vec -E- m -E- a) -> (ys :R: Vec -E- n -E- a) -> Vec -E- (plus -R- m -R- n) -E- a
  pat (a :E: *) (n :E: N) (ys :R: Vec -E- n -E- a).
    append -E- a -R- Z -R- n -R- (Nil -E- a) -R- ys  =  ys
  pat (a :E: *) (m :R: N) (n :R: N) (x :R: a) (xs :R: Vec -E- m -E- a) (ys :R: Vec -E- n -E- a).
    append -E- a -R- (S -R- m) -R- n -R- (Cons -E- a -R- m -R- x -R- xs) -R- ys  =  Cons -E- a -R- (plus -R- m -R- n) -R- x -R- (append -E- a -R- m -R- n -R- xs -R- ys)

main :R: Vec -E- 1 -E- N
  = append -E- N -R- Z -R- 1 -R- (Nil -E- N) -R- (Cons -E- N -R- Z -R- 42 -R- (Nil -E- N))

### Specialised ###

postulate N :!E: *

postulate Z :!R: N

postulate S :!R: (_ :!R: N) -> N

postulate Vec :!E: (_ :!E: N) -> (_ :!E: *) -> *

postulate Nil :!R: (a :!E: *) -> Vec -!E- Z -!E- a

postulate Cons :!R: (a :!E: *) -> (n :!R: N) -> (x :!R: a) -> (xs :!R: Vec -!E- n -!E- a) -> Vec -!E- (S -!R- n) -!E- a

plus :!R: (_ :!R: N) -> (_ :!R: N) -> N
  pat (n :!R: N).
    plus -!R- Z -!R- n  =  n
  pat (m :!R: N) (n :!R: N).
    plus -!R- (S -!R- m) -!R- n  =  S -!R- (plus -!R- m -!R- n)

append :!R: (a :!E: *) -> (m :!R: N) -> (n :!R: N) -> (xs :!R: Vec -!E- m -!E- a) -> (ys :!R: Vec -!E- n -!E- a) -> Vec -!E- (plus -!R- m -!R- n) -!E- a
  pat (a :!E: *) (n :!E: N) (ys :!R: Vec -!E- n -!E- a).
    append -!E- a -!R- Z -!R- n -!R- (Nil -!E- a) -!R- ys  =  ys
  pat (a :!E: *) (m :!R: N) (n :!R: N) (x :!R: a) (xs :!R: Vec -!E- m -!E- a) (ys :!R: Vec -!E- n -!E- a).
    append -!E- a -!R- (S -!R- m) -!R- n -!R- (Cons -!E- a -!R- m -!R- x -!R- xs) -!R- ys  =  Cons -!E- a -!R- (plus -!R- m -!R- n) -!R- x -!R- (append -!E- a -!R- m -!R- n -!R- xs -!R- ys)

main :!R: Vec -!E- 1 -!E- N
  = append -!E- N -!R- Z -!R- 1 -!R- (Nil -!E- N) -!R- (Cons -!E- N -!R- Z -!R- 42 -!R- (Nil -!E- N))

### Final annotation ###

postulate N :E: *

postulate Z :R: N

postulate S :R: (_ :R: N) -> N

postulate Vec :E: (_ :E: N) -> (_ :E: *) -> *

postulate Nil :R: (a :E: *) -> Vec -E- Z -E- a

postulate Cons :R: (a :E: *) -> (n :R: N) -> (x :R: a) -> (xs :R: Vec -E- n -E- a) -> Vec -E- (S -R- n) -E- a

plus :R: (_ :R: N) -> (_ :R: N) -> N
  pat (n :R: N).
    plus -R- Z -R- n  =  n
  pat (m :R: N) (n :R: N).
    plus -R- (S -R- m) -R- n  =  S -R- (plus -R- m -R- n)

append :R: (a :E: *) -> (m :R: N) -> (n :R: N) -> (xs :R: Vec -E- m -E- a) -> (ys :R: Vec -E- n -E- a) -> Vec -E- (plus -R- m -R- n) -E- a
  pat (a :E: *) (n :E: N) (ys :R: Vec -E- n -E- a).
    append -E- a -R- Z -R- n -R- (Nil -E- a) -R- ys  =  ys
  pat (a :E: *) (m :R: N) (n :R: N) (x :R: a) (xs :R: Vec -E- m -E- a) (ys :R: Vec -E- n -E- a).
    append -E- a -R- (S -R- m) -R- n -R- (Cons -E- a -R- m -R- x -R- xs) -R- ys  =  Cons -E- a -R- (plus -R- m -R- n) -R- x -R- (append -E- a -R- m -R- n -R- xs -R- ys)

main :R: Vec -E- 1 -E- N
  = append -E- N -R- Z -R- 1 -R- (Nil -E- N) -R- (Cons -E- N -R- Z -R- 42 -R- (Nil -E- N))

### Pruned ###

postulate Z

postulate S

postulate Nil

postulate Cons

  pat (n).
    plus Z n  =  n
  pat (m) (n).
    plus (S m) n  =  S (plus m n)

  pat (ys).
    append Z n Nil ys  =  ys
  pat (m) (n) (x) (xs) (ys).
    append (S m) n (Cons m x xs) ys  =  Cons (plus m n) x (append m n xs ys)

  = append Z 1 Nil (Cons Z 42 Nil)

### Normal forms ###

unerased:
  Cons N Z 42 (Nil N)
erased:
