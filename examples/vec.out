-- vim: ft=agda

### Desugared ###

postulate N : *

postulate Z : N

postulate S : (_ : N) -> N

postulate Vec : (_ : N) -> (_ : *) -> *

postulate Nil : (a : *) -> Vec Z a

postulate Cons : (a : *) -> (n : N) -> (x : a) -> (xs : Vec n a) -> Vec (S n) a

plus : (_ : N) -> (_ : N) -> N
  pat (n : N).
    plus Z n  =  n
  pat (m : N) (n : N).
    plus (S m) n  =  S (plus m n)

append : (a : *) -> (m : N) -> (n : N) -> (xs : Vec m a) -> (ys : Vec n a) -> Vec (plus m n) a
  pat (a : *) (n : N) (ys : Vec n a).
    append a Z n (Nil a) ys  =  ys
  pat (a : *) (m : N) (n : N) (x : a) (xs : Vec m a) (ys : Vec n a).
    append a (S m) n (Cons a m x xs) ys  =  Cons a (plus m n) x (append a m n xs ys)

main  -R-  Vec 1 N
  = append N Z 1 (Nil N) (Cons N Z 42 (Nil N))

### Metaified ###

postulate N :?1: *

postulate Z :?2: N

postulate S :?3: (_ :?4: N) -> N

postulate Vec :?5: (_ :?6: N) -> (_ :?7: *) -> *

postulate Nil :?8: (a :?9: *) -> Vec -?11- Z -?10- a

postulate Cons :?12: (a :?13: *) -> (n :?14: N) -> (x :?15: a) -> (xs :?16: Vec -?18- n -?17- a) -> Vec -?20- (S -?21- n) -?19- a

plus :?22: (_ :?23: N) -> (_ :?24: N) -> N
  pat (n :?25: N).
    plus -?27- Z -?26- n  =  n
  pat (m :?28: N) (n :?29: N).
    plus -?31- (S -?32- m) -?30- n  =  S -?33- (plus -?35- m -?34- n)

append :?36: (a :?37: *) -> (m :?38: N) -> (n :?39: N) -> (xs :?40: Vec -?42- m -?41- a) -> (ys :?43: Vec -?45- n -?44- a) -> Vec -?47- (plus -?49- m -?48- n) -?46- a
  pat (a :?50: *) (n :?51: N) (ys :?52: Vec -?54- n -?53- a).
    append -?59- a -?58- Z -?57- n -?56- (Nil -?60- a) -?55- ys  =  ys
  pat (a :?61: *) (m :?62: N) (n :?63: N) (x :?64: a) (xs :?65: Vec -?67- m -?66- a) (ys :?68: Vec -?70- n -?69- a).
    append -?75- a -?74- (S -?76- m) -?73- n -?72- (Cons -?80- a -?79- m -?78- x -?77- xs) -?71- ys  =  Cons -?84- a -?83- (plus -?86- m -?85- n) -?82- x -?81- (append -?91- a -?90- m -?89- n -?88- xs -?87- ys)

main :!R: Vec -?93- 1 -?92- N
  = append -?99- N -?98- Z -?97- 1 -?96- (Nil -?101- N) -?95- (Cons -?105- N -?104- Z -?103- 42 -?102- (Nil -?148- N))

### Inferred definitions ###

Cons :?12: (a :?13: *) -> (n :?14: N) -> (x :?15: a) -> (xs :?16: Vec -?18- n -?17- a) -> Vec -?20- (S -?21- n) -?19- a

N :?1: *

Nil :?8: (a :?9: *) -> Vec -?11- Z -?10- a

S :?3: (_ :?4: N) -> N

Vec :?5: (_ :?6: N) -> (_ :?7: *) -> *

Z :?2: N

append :?36: (a :?37: *) -> (m :?38: N) -> (n :?39: N) -> (xs :?40: Vec -?42- m -?41- a) -> (ys :?43: Vec -?45- n -?44- a) -> Vec -?47- (plus -?49- m -?48- n) -?46- a 
  pat (a :?50: *) (n :?51: N) (ys :?52: Vec -?54- n -?53- a).
    append -?59- a -?58- Z -?57- n -?56- (Nil -?60- a) -?55- ys  =  ys
  pat (a :?61: *) (m :?62: N) (n :?63: N) (x :?64: a) (xs :?65: Vec -?67- m -?66- a) (ys :?68: Vec -?70- n -?69- a).
    append -?75- a -?74- (S -?76- m) -?73- n -?72- (Cons -?80- a -?79- m -?78- x -?77- xs) -?71- ys  =  Cons -?84- a -?83- (plus -?86- m -?85- n) -?82- x -?81- (append -?91- a -?90- m -?89- n -?88- xs -?87- ys)
  [] -> [?12,?40,?43,?52,?55,?56,?71,?72,!R]
  [?2] -> [?38]
  [?3] -> [?38]
  [?4] -> [?38,?76]
  [?9] -> [?60]
  [?10] -> [?41]
  [?11] -> [?42]
  [?13] -> [?61,?80,?84]
  [?14] -> [?22,?79,?83]
  [?14,?23] -> [?62,?86]
  [?14,?24] -> [?63,?85]
  [?14,?85] -> [?24]
  [?14,?86] -> [?23]
  [?15] -> [?64,?78,?82]
  [?16] -> [?36,?65,?68,?77,?81,?87,?88]
  [?16,?37] -> [?61,?91]
  [?16,?38] -> [?62,?90]
  [?16,?39] -> [?63,?89]
  [?16,?41] -> [?66]
  [?16,?42] -> [?67]
  [?16,?44] -> [?69]
  [?16,?45] -> [?70]
  [?16,?66] -> [?41]
  [?16,?67] -> [?42]
  [?16,?69] -> [?44]
  [?16,?70] -> [?45]
  [?16,?89] -> [?39]
  [?16,?90] -> [?38]
  [?16,?91] -> [?37]
  [?17] -> [?46,?66]
  [?18] -> [?47,?67]
  [?19] -> [?41,?46]
  [?20] -> [?42,?47]
  [?21] -> [?33,?76]
  [?33] -> [?21]
  [?34] -> [?85]
  [?35] -> [?86]
  [?37] -> [?59,?75]
  [?38] -> [?58,?74]
  [?39] -> [?57,?73]
  [?41] -> [?10,?19]
  [?42] -> [?11,?20]
  [?44] -> [?53,?69]
  [?45] -> [?54,?70]
  [?46] -> [?17,?19,?53]
  [?47] -> [?18,?20,?54]
  [?48] -> [?85]
  [?49] -> [?86]
  [?50] -> [?9,?37]
  [?51] -> [?39]
  [?53] -> [?44,?46]
  [?54] -> [?45,?47]
  [?57] -> [?39]
  [?58] -> [?38]
  [?59] -> [?37]
  [?60] -> [?9]
  [?61] -> [?13,?37]
  [?62] -> [?4,?14,?38]
  [?63] -> [?39]
  [?64] -> [?15]
  [?65] -> [?16]
  [?66] -> [?17]
  [?67] -> [?18]
  [?69] -> [?44]
  [?70] -> [?45]
  [?73] -> [?39]
  [?74] -> [?38]
  [?75] -> [?37]
  [?76] -> [?4,?21,?38]
  [?77] -> [?16]
  [?78] -> [?15]
  [?79] -> [?14]
  [?80] -> [?13]
  [?81] -> [?16]
  [?82] -> [?15]
  [?83] -> [?14]
  [?84] -> [?13]
  [?85] -> [?34,?48]
  [?86] -> [?35,?49]

main :!R: Vec -?93- 1 -?92- N = append -?99- N -?98- Z -?97- 1 -?96- (Nil -?101- N) -?95- (Cons -?105- N -?104- Z -?103- 42 -?102- (Nil -?148- N))
  [] -> [?36,!R]
  [?4,?15,?43] -> [?2,?3,?106,?107,?108,?109,?110,?111,?112,?113,?114,?115,?116,?117,?118,?119,?120,?121,?122,?123,?124,?125,?126,?127,?128,?129,?130,?131,?132,?133,?134,?135,?136,?137,?138,?139,?140,?141,?142,?143,?144,?145,?146,?147]
  [?4,?15,?43,?107] -> [?4]
  [?4,?15,?43,?108] -> [?4]
  [?4,?15,?43,?109] -> [?4]
  [?4,?15,?43,?110] -> [?4]
  [?4,?15,?43,?111] -> [?4]
  [?4,?15,?43,?112] -> [?4]
  [?4,?15,?43,?113] -> [?4]
  [?4,?15,?43,?114] -> [?4]
  [?4,?15,?43,?115] -> [?4]
  [?4,?15,?43,?116] -> [?4]
  [?4,?15,?43,?117] -> [?4]
  [?4,?15,?43,?118] -> [?4]
  [?4,?15,?43,?119] -> [?4]
  [?4,?15,?43,?120] -> [?4]
  [?4,?15,?43,?121] -> [?4]
  [?4,?15,?43,?122] -> [?4]
  [?4,?15,?43,?123] -> [?4]
  [?4,?15,?43,?124] -> [?4]
  [?4,?15,?43,?125] -> [?4]
  [?4,?15,?43,?126] -> [?4]
  [?4,?15,?43,?127] -> [?4]
  [?4,?15,?43,?128] -> [?4]
  [?4,?15,?43,?129] -> [?4]
  [?4,?15,?43,?130] -> [?4]
  [?4,?15,?43,?131] -> [?4]
  [?4,?15,?43,?132] -> [?4]
  [?4,?15,?43,?133] -> [?4]
  [?4,?15,?43,?134] -> [?4]
  [?4,?15,?43,?135] -> [?4]
  [?4,?15,?43,?136] -> [?4]
  [?4,?15,?43,?137] -> [?4]
  [?4,?15,?43,?138] -> [?4]
  [?4,?15,?43,?139] -> [?4]
  [?4,?15,?43,?140] -> [?4]
  [?4,?15,?43,?141] -> [?4]
  [?4,?15,?43,?142] -> [?4]
  [?4,?15,?43,?143] -> [?4]
  [?4,?15,?43,?144] -> [?4]
  [?4,?15,?43,?145] -> [?4]
  [?4,?15,?43,?146] -> [?4]
  [?4,?15,?43,?147] -> [?4]
  [?4,?39] -> [?2,?100]
  [?9,?16,?43] -> [?1,?148]
  [?9,?40] -> [?1,?101]
  [?10] -> [?41]
  [?10,?43] -> [?17]
  [?11] -> [?42]
  [?11,?43] -> [?18]
  [?13,?43] -> [?1,?105]
  [?14,?43] -> [?2,?104]
  [?15,?43] -> [?3,?103]
  [?15,?43,?106] -> [?4]
  [?16,?43] -> [?8,?102]
  [?16,?43,?148] -> [?9]
  [?17,?43] -> [?10]
  [?18,?43] -> [?11]
  [?19] -> [?44]
  [?20] -> [?45]
  [?21] -> [?100]
  [?37] -> [?1,?99]
  [?38] -> [?2,?98]
  [?39] -> [?3,?97]
  [?39,?100] -> [?4]
  [?40] -> [?8,?96]
  [?40,?101] -> [?9]
  [?41] -> [?10]
  [?42] -> [?11]
  [?43] -> [?12,?95]
  [?43,?102] -> [?16]
  [?43,?103] -> [?15]
  [?43,?104] -> [?14]
  [?43,?105] -> [?13]
  [?44] -> [?19]
  [?45] -> [?20]
  [?46] -> [?92]
  [?47] -> [?93]
  [?92] -> [?46]
  [?93] -> [?47]
  [?94] -> [?100]
  [?95] -> [?43]
  [?96] -> [?40]
  [?97] -> [?39]
  [?98] -> [?38]
  [?99] -> [?37]
  [?100] -> [?21,?94]

plus :?22: (_ :?23: N) -> (_ :?24: N) -> N 
  pat (n :?25: N).
    plus -?27- Z -?26- n  =  n
  pat (m :?28: N) (n :?29: N).
    plus -?31- (S -?32- m) -?30- n  =  S -?33- (plus -?35- m -?34- n)
  [] -> [?3,?23,?24,?25,?26,?27,?30,?31,!R]
  [?4] -> [?22,?28,?29,?32,?33,?34,?35]
  [?28] -> [?4]
  [?32] -> [?4]
  [?33] -> [?4]


### Constraints ###

[] -> [?3,?12,?23,?24,?25,?26,?27,?30,?31,?36,?40,?43,?52,?55,?56,?71,?72,!R]
[?2] -> [?38]
[?3] -> [?38]
[?4] -> [?22,?28,?29,?32,?33,?34,?35,?38,?76]
[?4,?15,?43] -> [?2,?3,?106,?107,?108,?109,?110,?111,?112,?113,?114,?115,?116,?117,?118,?119,?120,?121,?122,?123,?124,?125,?126,?127,?128,?129,?130,?131,?132,?133,?134,?135,?136,?137,?138,?139,?140,?141,?142,?143,?144,?145,?146,?147]
[?4,?15,?43,?107] -> [?4]
[?4,?15,?43,?108] -> [?4]
[?4,?15,?43,?109] -> [?4]
[?4,?15,?43,?110] -> [?4]
[?4,?15,?43,?111] -> [?4]
[?4,?15,?43,?112] -> [?4]
[?4,?15,?43,?113] -> [?4]
[?4,?15,?43,?114] -> [?4]
[?4,?15,?43,?115] -> [?4]
[?4,?15,?43,?116] -> [?4]
[?4,?15,?43,?117] -> [?4]
[?4,?15,?43,?118] -> [?4]
[?4,?15,?43,?119] -> [?4]
[?4,?15,?43,?120] -> [?4]
[?4,?15,?43,?121] -> [?4]
[?4,?15,?43,?122] -> [?4]
[?4,?15,?43,?123] -> [?4]
[?4,?15,?43,?124] -> [?4]
[?4,?15,?43,?125] -> [?4]
[?4,?15,?43,?126] -> [?4]
[?4,?15,?43,?127] -> [?4]
[?4,?15,?43,?128] -> [?4]
[?4,?15,?43,?129] -> [?4]
[?4,?15,?43,?130] -> [?4]
[?4,?15,?43,?131] -> [?4]
[?4,?15,?43,?132] -> [?4]
[?4,?15,?43,?133] -> [?4]
[?4,?15,?43,?134] -> [?4]
[?4,?15,?43,?135] -> [?4]
[?4,?15,?43,?136] -> [?4]
[?4,?15,?43,?137] -> [?4]
[?4,?15,?43,?138] -> [?4]
[?4,?15,?43,?139] -> [?4]
[?4,?15,?43,?140] -> [?4]
[?4,?15,?43,?141] -> [?4]
[?4,?15,?43,?142] -> [?4]
[?4,?15,?43,?143] -> [?4]
[?4,?15,?43,?144] -> [?4]
[?4,?15,?43,?145] -> [?4]
[?4,?15,?43,?146] -> [?4]
[?4,?15,?43,?147] -> [?4]
[?4,?39] -> [?2,?100]
[?9] -> [?60]
[?9,?16,?43] -> [?1,?148]
[?9,?40] -> [?1,?101]
[?10] -> [?41]
[?10,?43] -> [?17]
[?11] -> [?42]
[?11,?43] -> [?18]
[?13] -> [?61,?80,?84]
[?13,?43] -> [?1,?105]
[?14] -> [?22,?79,?83]
[?14,?23] -> [?62,?86]
[?14,?24] -> [?63,?85]
[?14,?43] -> [?2,?104]
[?14,?85] -> [?24]
[?14,?86] -> [?23]
[?15] -> [?64,?78,?82]
[?15,?43] -> [?3,?103]
[?15,?43,?106] -> [?4]
[?16] -> [?36,?65,?68,?77,?81,?87,?88]
[?16,?37] -> [?61,?91]
[?16,?38] -> [?62,?90]
[?16,?39] -> [?63,?89]
[?16,?41] -> [?66]
[?16,?42] -> [?67]
[?16,?43] -> [?8,?102]
[?16,?43,?148] -> [?9]
[?16,?44] -> [?69]
[?16,?45] -> [?70]
[?16,?66] -> [?41]
[?16,?67] -> [?42]
[?16,?69] -> [?44]
[?16,?70] -> [?45]
[?16,?89] -> [?39]
[?16,?90] -> [?38]
[?16,?91] -> [?37]
[?17] -> [?46,?66]
[?17,?43] -> [?10]
[?18] -> [?47,?67]
[?18,?43] -> [?11]
[?19] -> [?41,?44,?46]
[?20] -> [?42,?45,?47]
[?21] -> [?33,?76,?100]
[?28] -> [?4]
[?32] -> [?4]
[?33] -> [?4,?21]
[?34] -> [?85]
[?35] -> [?86]
[?37] -> [?1,?59,?75,?99]
[?38] -> [?2,?58,?74,?98]
[?39] -> [?3,?57,?73,?97]
[?39,?100] -> [?4]
[?40] -> [?8,?96]
[?40,?101] -> [?9]
[?41] -> [?10,?19]
[?42] -> [?11,?20]
[?43] -> [?12,?95]
[?43,?102] -> [?16]
[?43,?103] -> [?15]
[?43,?104] -> [?14]
[?43,?105] -> [?13]
[?44] -> [?19,?53,?69]
[?45] -> [?20,?54,?70]
[?46] -> [?17,?19,?53,?92]
[?47] -> [?18,?20,?54,?93]
[?48] -> [?85]
[?49] -> [?86]
[?50] -> [?9,?37]
[?51] -> [?39]
[?53] -> [?44,?46]
[?54] -> [?45,?47]
[?57] -> [?39]
[?58] -> [?38]
[?59] -> [?37]
[?60] -> [?9]
[?61] -> [?13,?37]
[?62] -> [?4,?14,?38]
[?63] -> [?39]
[?64] -> [?15]
[?65] -> [?16]
[?66] -> [?17]
[?67] -> [?18]
[?69] -> [?44]
[?70] -> [?45]
[?73] -> [?39]
[?74] -> [?38]
[?75] -> [?37]
[?76] -> [?4,?21,?38]
[?77] -> [?16]
[?78] -> [?15]
[?79] -> [?14]
[?80] -> [?13]
[?81] -> [?16]
[?82] -> [?15]
[?83] -> [?14]
[?84] -> [?13]
[?85] -> [?34,?48]
[?86] -> [?35,?49]
[?92] -> [?46]
[?93] -> [?47]
[?94] -> [?100]
[?95] -> [?43]
[?96] -> [?40]
[?97] -> [?39]
[?98] -> [?38]
[?99] -> [?37]
[?100] -> [?21,?94]

### Solution ###

[?2,?3,?8,?12,?23,?24,?25,?26,?27,?30,?31,?36,?38,?40,?43,?52,?55,?56,?58,?71,?72,?74,?95,?96,?98,!R]

### Annotated ###

postulate N :E: *

postulate Z :R: N

postulate S :R: (_ :E: N) -> N

postulate Vec :E: (_ :E: N) -> (_ :E: *) -> *

postulate Nil :R: (a :E: *) -> Vec -E- Z -E- a

postulate Cons :R: (a :E: *) -> (n :E: N) -> (x :E: a) -> (xs :E: Vec -E- n -E- a) -> Vec -E- (S -E- n) -E- a

plus :E: (_ :R: N) -> (_ :R: N) -> N
  pat (n :R: N).
    plus -R- Z -R- n  =  n
  pat (m :E: N) (n :E: N).
    plus -R- (S -E- m) -R- n  =  S -E- (plus -E- m -E- n)

append :R: (a :E: *) -> (m :R: N) -> (n :E: N) -> (xs :R: Vec -E- m -E- a) -> (ys :R: Vec -E- n -E- a) -> Vec -E- (plus -E- m -E- n) -E- a
  pat (a :E: *) (n :E: N) (ys :R: Vec -E- n -E- a).
    append -E- a -R- Z -E- n -R- (Nil -E- a) -R- ys  =  ys
  pat (a :E: *) (m :E: N) (n :E: N) (x :E: a) (xs :E: Vec -E- m -E- a) (ys :E: Vec -E- n -E- a).
    append -E- a -R- (S -E- m) -E- n -R- (Cons -E- a -E- m -E- x -E- xs) -R- ys  =  Cons -E- a -E- (plus -E- m -E- n) -E- x -E- (append -E- a -E- m -E- n -E- xs -E- ys)

main :R: Vec -E- 1 -E- N
  = append -E- N -R- Z -E- 1 -R- (Nil -E- N) -R- (Cons -E- N -E- Z -E- 42 -E- (Nil -E- N))

### Specialised ###

postulate N :!E: *

postulate Z :!R: N

postulate S :!R: (_ :!E: N) -> N

postulate Vec :!E: (_ :!E: N) -> (_ :!E: *) -> *

postulate Nil :!R: (a :!E: *) -> Vec -!E- Z -!E- a

postulate Cons :!R: (a :!E: *) -> (n :!E: N) -> (x :!E: a) -> (xs :!E: Vec -!E- n -!E- a) -> Vec -!E- (S -!E- n) -!E- a

plus :!E: (_ :!R: N) -> (_ :!R: N) -> N
  pat (n :!R: N).
    plus -!R- Z -!R- n  =  n
  pat (m :!E: N) (n :!E: N).
    plus -!R- (S -!E- m) -!R- n  =  S -!E- (plus -!E- m -!E- n)

append :!R: (a :!E: *) -> (m :!R: N) -> (n :!E: N) -> (xs :!R: Vec -!E- m -!E- a) -> (ys :!R: Vec -!E- n -!E- a) -> Vec -!E- (plus -!E- m -!E- n) -!E- a
  pat (a :!E: *) (n :!E: N) (ys :!R: Vec -!E- n -!E- a).
    append -!E- a -!R- Z -!E- n -!R- (Nil -!E- a) -!R- ys  =  ys
  pat (a :!E: *) (m :!E: N) (n :!E: N) (x :!E: a) (xs :!E: Vec -!E- m -!E- a) (ys :!E: Vec -!E- n -!E- a).
    append -!E- a -!R- (S -!E- m) -!E- n -!R- (Cons -!E- a -!E- m -!E- x -!E- xs) -!R- ys  =  Cons -!E- a -!E- (plus -!E- m -!E- n) -!E- x -!E- (append -!E- a -!E- m -!E- n -!E- xs -!E- ys)

main :!R: Vec -!E- 1 -!E- N
  = append -!E- N -!R- Z -!E- 1 -!R- (Nil -!E- N) -!R- (Cons -!E- N -!E- Z -!E- 42 -!E- (Nil -!E- N))

### Final annotation ###

postulate N :E: *

postulate Z :R: N

postulate S :R: (_ :E: N) -> N

postulate Vec :E: (_ :E: N) -> (_ :E: *) -> *

postulate Nil :R: (a :E: *) -> Vec -E- Z -E- a

postulate Cons :R: (a :E: *) -> (n :E: N) -> (x :E: a) -> (xs :E: Vec -E- n -E- a) -> Vec -E- (S -E- n) -E- a

plus :E: (_ :R: N) -> (_ :R: N) -> N
  pat (n :R: N).
    plus -R- Z -R- n  =  n
  pat (m :E: N) (n :E: N).
    plus -R- (S -E- m) -R- n  =  S -E- (plus -E- m -E- n)

append :R: (a :E: *) -> (m :R: N) -> (n :E: N) -> (xs :R: Vec -E- m -E- a) -> (ys :R: Vec -E- n -E- a) -> Vec -E- (plus -E- m -E- n) -E- a
  pat (a :E: *) (n :E: N) (ys :R: Vec -E- n -E- a).
    append -E- a -R- Z -E- n -R- (Nil -E- a) -R- ys  =  ys
  pat (a :E: *) (m :E: N) (n :E: N) (x :E: a) (xs :E: Vec -E- m -E- a) (ys :E: Vec -E- n -E- a).
    append -E- a -R- (S -E- m) -E- n -R- (Cons -E- a -E- m -E- x -E- xs) -R- ys  =  Cons -E- a -E- (plus -E- m -E- n) -E- x -E- (append -E- a -E- m -E- n -E- xs -E- ys)

main :R: Vec -E- 1 -E- N
  = append -E- N -R- Z -E- 1 -R- (Nil -E- N) -R- (Cons -E- N -E- Z -E- 42 -E- (Nil -E- N))

### Pruned ###

postulate Z

postulate S

postulate Nil

postulate Cons

  pat (ys).
    append Z Nil ys  =  ys
  append S Cons ys  =  Cons

  = append Z Nil Cons

### Normal forms ###

unerased:
  Cons N Z 42 (Nil N)
erased:
  Cons
