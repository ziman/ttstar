-- vim: ft=agda

### Desugared ###

postulate N : *

postulate Z : N

postulate S : (_ : N) -> N

plus : (_ : N) -> (_ : N) -> N 
  pat (n : N).
    plus Z n = n
  pat (m : N) (n : N).
    plus (S m) n = S (plus m n)

main  -R-  N = plus 3 4

### Metaified ###

postulate N :?1: *

postulate Z :?2: N

postulate S :?3: (_ :?4: N) -> N

plus :?5: (_ :?6: N) -> (_ :?7: N) -> N 
  pat (n :?8: N).
    plus -?10- Z -?9- n = n
  pat (m :?11: N) (n :?12: N).
    plus -?14- (S -?15- m) -?13- n = S -?16- (plus -?18- m -?17- n)

main :!R: N = plus -?20- 3 -?19- 4

### Inferred definitions ###

postulate N :?1: *

postulate S :?3: (_ :?4: N) -> N

postulate Z :?2: N

main :!R: N = plus -?20- 3 -?19- 4
  [] -> [?5,!R]
  [?4,?6] -> [?2,?3,?21,?22,?23]
  [?4,?6,?22] -> [?4]
  [?4,?6,?23] -> [?4]
  [?4,?7] -> [?2,?3,?24,?25,?26,?27]
  [?4,?7,?25] -> [?4]
  [?4,?7,?26] -> [?4]
  [?4,?7,?27] -> [?4]
  [?6] -> [?3,?20]
  [?6,?21] -> [?4]
  [?7] -> [?3,?19]
  [?7,?24] -> [?4]
  [?19] -> [?7]
  [?20] -> [?6]

plus :?5: (_ :?6: N) -> (_ :?7: N) -> N 
  pat (n :?8: N).
    plus -?10- Z -?9- n = n
  pat (m :?11: N) (n :?12: N).
    plus -?14- (S -?15- m) -?13- n = S -?16- (plus -?18- m -?17- n)
  [] -> [?3,?6,?7,?8,?9,?10,?13,?14,!R]
  [?4] -> [?5,?11,?12,?15,?16,?17,?18]
  [?11] -> [?4]
  [?15] -> [?4]
  [?16] -> [?4]


### Constraints ###

[] -> [?3,?5,?6,?7,?8,?9,?10,?13,?14,!R]
[?4] -> [?5,?11,?12,?15,?16,?17,?18]
[?4,?6] -> [?2,?3,?21,?22,?23]
[?4,?6,?22] -> [?4]
[?4,?6,?23] -> [?4]
[?4,?7] -> [?2,?3,?24,?25,?26,?27]
[?4,?7,?25] -> [?4]
[?4,?7,?26] -> [?4]
[?4,?7,?27] -> [?4]
[?6] -> [?3,?20]
[?6,?21] -> [?4]
[?7] -> [?3,?19]
[?7,?24] -> [?4]
[?11] -> [?4]
[?15] -> [?4]
[?16] -> [?4]
[?19] -> [?7]
[?20] -> [?6]

### Solution ###

[?3,?5,?6,?7,?8,?9,?10,?13,?14,?19,?20,!R]

### Annotated ###

postulate N :E: *

postulate Z :E: N

postulate S :R: (_ :E: N) -> N

plus :R: (_ :R: N) -> (_ :R: N) -> N 
  pat (n :R: N).
    plus -R- Z -R- n = n
  pat (m :E: N) (n :E: N).
    plus -R- (S -E- m) -R- n = S -E- (plus -E- m -E- n)

main :R: N = plus -R- 3 -R- 4

### Specialised ###

postulate N :!E: *

postulate Z :!E: N

postulate S :!R: (_ :!E: N) -> N

plus :!R: (_ :!R: N) -> (_ :!R: N) -> N 
  pat (n :!R: N).
    plus -!R- Z -!R- n = n
  pat (m :!E: N) (n :!E: N).
    plus -!R- (S -!E- m) -!R- n = S -!E- (plus -!E- m -!E- n)

main :!R: N = plus -!R- 3 -!R- 4

### Final annotation ###

postulate N :E: *

postulate Z :E: N

postulate S :R: (_ :E: N) -> N

plus :R: (_ :R: N) -> (_ :R: N) -> N 
  pat (n :R: N).
    plus -R- Z -R- n = n
  pat (m :E: N) (n :E: N).
    plus -R- (S -E- m) -R- n = S -E- (plus -E- m -E- n)

main :R: N = plus -R- 3 -R- 4

### Verification ###

Verification successful.

### Pruned ###

postulate S

plus 
  plus S _ = S

main = plus S S

### Normal forms ###

unerased:
  7
erased:
  S
